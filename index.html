<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Acesso</title>
<style>
  body { font-family: sans-serif; background: linear-gradient(135deg,#1976d2,#42a5f5); display:flex; align-items:center; justify-content:center; height:100vh; margin:0; color:#fff; }
  .card { background: rgba(255,255,255,0.15); padding:30px; border-radius:20px; text-align:center; width:90%; max-width:380px; }
  input { width:100%; padding:12px; border:none; border-radius:8px; margin-bottom:15px; font-size:1rem; }
  button { background:#fff; color:#1976d2; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; margin:5px; font-weight:bold; }
  button:hover { background:#e3f2fd; }
  #mensagem { margin-top:10px; font-weight:bold; }
  #sistema { display:none; flex-direction:column; align-items:center; }
</style>
</head>
<body>

<div class="card" id="login">
  <h1>Verificação de Acesso</h1>
  <input type="email" id="email" placeholder="Digite seu e-mail">
  <button onclick="verificarAcesso()">Entrar</button>
  <p id="mensagem"></p>
</div>

<div class="card" id="sistema">
  <h2>✅ Acesso Liberado</h2>
  <p>Bem-vindo ao sistema! Seu e-mail foi verificado com sucesso.</p>
  <button onclick="sair()">Sair</button>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzKKu6dXIVViG8BWh4S5D8EbgTVirLrpCQu7Cb2PH_ieG2Khqq-Ah5d-JZqp2ahEnt-Vg/exec";

window.onload = () => {
  if (localStorage.getItem("usuarioAutorizado")) mostrarSistema();
};

async function verificarAcesso(){
  const email = document.getElementById("email").value.trim();
  const mensagem = document.getElementById("mensagem");
  if(!email){ mensagem.textContent="Digite seu e-mail."; mensagem.style.color="yellow"; return; }

  mensagem.textContent="Verificando..."; mensagem.style.color="white";

  try {
    const r = await fetch(API_URL, {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({email})
    });
    const data = await r.json();
    if(data.autorizado){ localStorage.setItem("usuarioAutorizado", email); mostrarSistema(); }
    else { mensagem.textContent="❌ Acesso negado!"; mensagem.style.color="red"; }
  } catch { mensagem.textContent="Erro ao conectar com o servidor."; mensagem.style.color="orange"; }
}

function mostrarSistema(){
  document.getElementById("login").style.display="none";
  document.getElementById("sistema").style.display="flex";
}

function sair(){
  localStorage.removeItem("usuarioAutorizado");
  document.getElementById("sistema").style.display="none";
  document.getElementById("login").style.display="block";
}
</script>

</body>
</html>
